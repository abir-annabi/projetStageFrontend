<div class="container">
  <h2>{{ 'Connexion' | translate }}</h2>
  <form [formGroup]="loginForm" (ngSubmit)="submitForm()">
    <!-- Champ email -->
    <div class="form-group">
      <label for="email">{{ 'Email' | translate }}</label>
      <input
        type="email"
        class="form-control"
        id="email"
        formControlName="email"
      />
      <div *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid" class="text-danger">
        <small>{{ 'EmailRequired' | translate }}</small>
      </div>
    </div>

    <!-- Champ mot de passe -->
    <div class="form-group">
      <label for="password">{{ 'Password' | translate }}</label>
      <input
        type="password"
        class="form-control"
        id="password"
        formControlName="password"
      />
      <div *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid" class="text-danger">
        <small>{{ 'PasswordRequired' | translate }}</small>
      </div>
    </div>

    <!-- Champ Google reCAPTCHA -->
    <div class="form-group" *ngIf="showReCaptcha">
      <ngx-recaptcha2
        #captchaElem
        [siteKey]="siteKey"
        formControlName="captchaToken"
      ></ngx-recaptcha2>
      <div *ngIf="loginForm.get('captchaToken')?.touched && loginForm.get('captchaToken')?.invalid" class="text-danger">
        <small>{{ 'ReCaptchaRequired' | translate }}</small>
      </div>
    </div>

    <!-- Bouton Login -->
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="loginForm.invalid || isSubmitting"
    >
      {{ isSubmitting ? ('LoggingIn' | translate) : ('LoginButton' | translate) }}
    </button>

    <!-- Bouton vers l'inscription -->
    <p>{{ 'RegisterPrompt' | translate }}</p>
    <a href="/register" class="btn btn-secondary">{{ 'RegisterButton' | translate }}</a>
  </form>
</div>
